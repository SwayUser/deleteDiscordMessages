<html>
<body>
<a href="javascript:%0A%0A%28function%20%28%29%20%7B%0A%20%20%20%20let%20stop%3B%0A%20%20%20%20let%20popup%3B%0A%20%20%20%20popup%20%3D%20window.open%28%27%27%2C%20%27%27%2C%20%60top%3D0%2Cleft%3D%24%7Bscreen.width-800%7D%2Cwidth%3D830%2Cheight%3D%24%7Bscreen.height%7D%60%29%3B%0A%20%20%20%20if%20%28%21popup%29%20return%20console.error%28%27Popup%20blocked%21%20Please%20allow%20popups%20and%20try%20again.%27%29%3B%0A%20%20%20%20popup.document.write%28/%2Ahtml%2A/%60%3C%21DOCTYPE%20html%3E%0A%20%20%20%20%3Chtml%3E%3Chead%3E%3Cmeta%20charset%3D%27utf-8%27%3E%3Ctitle%3EDelete%20Discord%20Messages%3C/title%3E%3Cbase%20target%3D%22_blank%22%3E%0A%20%20%20%20%3Cstyle%3Ebody%7Bbackground-color%3A%2336393f%3Bcolor%3A%23dcddde%3Bfont-family%3Asans-serif%3B%7D%20a%7Bcolor%3A%2300b0f4%3B%7D%0A%20%20%20%20body.redact%20.priv%7Bdisplay%3Anone%3B%7D%20body%3Anot%28.redact%29%20.mask%7Bdisplay%3Anone%3B%7D%20body.redact%20%5Bpriv%5D%7B-webkit-text-security%3Adisc%3B%7D%0A%20%20%20%20.toolbar%20span%7Bmargin-right%3A8px%3B%7D%0A%20%20%20%20button%2Clabel%5Bfor%3D%22file%22%5D%7Bcolor%3A%23fff%3Bbackground%3A%237289da%3Bborder%3A0%3Bborder-radius%3A4px%3Bfont-size%3A14px%3B%7D%20button%3Adisabled%7Bdisplay%3Anone%3B%7D%0A%20%20%20%20input%5Btype%3D%22text%22%5D%2Cinput%5Btype%3D%22password%22%5D%7Bbackground-color%3A%23202225%3Bcolor%3A%23b9bbbe%3Bborder-radius%3A4px%3Bborder%3A0%3Bpadding%3A0%20.5em%3Bheight%3A24px%3Bwidth%3A144px%3Bmargin%3A2px%3B%7D%0A%20%20%20%20input%23file%7Bdisplay%3A%20none%7D%0A%20%20%20%20%3C/style%3E%3C/head%3E%3Cbody%3E%0A%20%20%20%20%3Cdiv%20class%3D%22toolbar%22%20style%3D%22position%3Afixed%3Btop%3A0%3Bleft%3A0%3Bright%3A0%3Bpadding%3A8px%3Bbackground%3A%2336393f%3Bbox-shadow%3A%200%201px%200%20rgba%280%2C0%2C0%2C.2%29%2C%200%201.5px%200%20rgba%280%2C0%2C0%2C.05%29%2C%200%202px%200%20rgba%280%2C0%2C0%2C.05%29%3B%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22display%3Aflex%3Bflex-wrap%3Awrap%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3EAuthorization%20%3Ca%20href%3D%22https%3A//github.com/victornpb/deleteDiscordMessages/blob/master/help/authToken.md%22%20title%3D%22Help%22%3E%3F%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22getToken%22%3EGet%3C/button%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22password%22%20id%3D%22authToken%22%20placeholder%3D%22Auth%20Token%22%20autofocus%3E%2A%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3EAuthor%20%3Ca%20href%3D%22https%3A//github.com/victornpb/deleteDiscordMessages/blob/master/help/authorId.md%22%20title%3D%22Help%22%3E%3F%3C/a%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22getAuthor%22%3EMe%3C/button%3E%3Cbr%3E%3Cinput%20id%3D%22authorId%22%20type%3D%22text%22%20placeholder%3D%22Author%20ID%22%20priv%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3EGuild/Channel%20%3Ca%20href%3D%22https%3A//github.com/victornpb/deleteDiscordMessages/blob/master/help/channelId.md%22%20title%3D%22Help%22%3E%3F%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22getGuildAndChannel%22%3EGet%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22file%22%20type%3D%22file%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20for%3D%22file%22%3EImport%20JSON%3C/label%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22guildId%22%20type%3D%22text%22%20placeholder%3D%22Guild%20ID%22%20priv%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22channelId%22%20type%3D%22text%22%20placeholder%3D%22Channel%20ID%22%20priv%3E%3C/span%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3ERange%20%3Ca%20href%3D%22https%3A//github.com/victornpb/deleteDiscordMessages/blob/master/help/messageId.md%22%20title%3D%22Help%22%3E%3F%3C/a%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22afterMessageId%22%20type%3D%22text%22%20placeholder%3D%22After%20messageId%22%20priv%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22beforeMessageId%22%20type%3D%22text%22%20placeholder%3D%22Before%20messageId%22%20priv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3EFilter%20%3Ca%20href%3D%22https%3A//github.com/victornpb/deleteDiscordMessages/blob/master/help/filters.md%22%20title%3D%22Help%22%3E%3F%3C/a%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22content%22%20type%3D%22text%22%20placeholder%3D%22Containing%20text%22%20priv%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%3E%3Cinput%20id%3D%22hasLink%22%20type%3D%22checkbox%22%3Ehas%3A%20link%3C/label%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%3E%3Cinput%20id%3D%22hasFile%22%20type%3D%22checkbox%22%3Ehas%3A%20file%3C/label%3E%3Cbr%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%3E%3Cinput%20id%3D%22includeNsfw%22%20type%3D%22checkbox%22%3EInclude%20NSFW%3C/label%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22start%22%20style%3D%22background%3A%2343b581%3Bwidth%3A80px%3B%22%3EStart%3C/button%3E%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22stop%22%20style%3D%22background%3A%23f04747%3Bwidth%3A80px%3B%22%20disabled%3EStop%3C/button%3E%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22clear%22%20style%3D%22width%3A80px%3B%22%3EClear%20log%3C/button%3E%0A%20%20%20%20%20%20%20%20%3Clabel%3E%3Cinput%20id%3D%22redact%22%20type%3D%22checkbox%22%3E%3Csmall%3EHide%20sensitive%20information%3C/small%3E%3C/label%3E%20%3Cspan%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%3Clabel%3E%3Cinput%20id%3D%22autoScroll%22%20type%3D%22checkbox%22%20checked%3E%3Csmall%3EAuto%20scroll%3C/small%3E%3C/label%3E%20%3Cspan%3E%3C/span%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cpre%20style%3D%22margin-top%3A150px%3Bfont-size%3A0.75rem%3Bfont-family%3AConsolas%2CLiberation%20Mono%2CMenlo%2CCourier%2Cmonospace%3B%22%3E%0A%20%20%20%20%20%20%20%20%3Ccenter%3EStar%20this%20project%20on%20%3Ca%20href%3D%22https%3A//github.com/victornpb/deleteDiscordMessages%22%20target%3D%22_blank%22%3Egithub.com/victornpb/deleteDiscordMessages%3C/a%3E%21%5Cn%5Cn%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href%3D%22https%3A//github.com/victornpb/deleteDiscordMessages/issues%22%20target%3D%22_blank%22%3EIssues%20or%20help%3C/a%3E%3C/center%3E%0A%20%20%20%20%20%20%20%20%3C/pre%3E%3C/body%3E%3C/html%3E%60%29%3B%0A%0A%20%20%20%20const%20logArea%20%3D%20popup.document.querySelector%28%27pre%27%29%3B%0A%20%20%20%20const%20startBtn%20%3D%20popup.document.querySelector%28%27button%23start%27%29%3B%0A%20%20%20%20const%20stopBtn%20%3D%20popup.document.querySelector%28%27button%23stop%27%29%3B%0A%20%20%20%20const%20autoScroll%20%3D%20popup.document.querySelector%28%27%23autoScroll%27%29%3B%0A%20%20%20%20const%20fileSelection%20%3D%20popup.document.querySelector%28%22input%23file%22%29%3B%0A%20%20%20%20fileSelection.addEventListener%28%22change%22%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20files%20%3D%20fileSelection.files%3B%0A%20%20%20%20%20%20%20%20const%20channelIdField%20%3D%20popup.document.querySelector%28%27input%23channelId%27%29%3B%0A%20%20%20%20%20%20%20%20if%20%28files.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20file%20%3D%20files%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20file.text%28%29.then%28text%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20json%20%3D%20JSON.parse%28text%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20channels%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Object.keys%28json%29.forEach%28k%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20channels.push%28k%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log%28k%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20channelIdField.value%20%3D%20channels.join%28%22%3B%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%20false%29%3B%0A%20%20%20%20startBtn.onclick%20%3D%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20authToken%20%3D%20popup.document.querySelector%28%27input%23authToken%27%29.value.trim%28%29%3B%0A%20%20%20%20%20%20%20%20const%20authorId%20%3D%20popup.document.querySelector%28%27input%23authorId%27%29.value.trim%28%29%3B%0A%20%20%20%20%20%20%20%20const%20guildId%20%3D%20popup.document.querySelector%28%27input%23guildId%27%29.value.trim%28%29%3B%0A%20%20%20%20%20%20%20%20const%20channelIds%20%3D%20popup.document.querySelector%28%27input%23channelId%27%29.value.trim%28%29.split%28%22%3B%22%29%3B%0A%20%20%20%20%20%20%20%20const%20afterMessageId%20%3D%20popup.document.querySelector%28%27input%23afterMessageId%27%29.value.trim%28%29%3B%0A%20%20%20%20%20%20%20%20const%20beforeMessageId%20%3D%20popup.document.querySelector%28%27input%23beforeMessageId%27%29.value.trim%28%29%3B%0A%20%20%20%20%20%20%20%20const%20content%20%3D%20popup.document.querySelector%28%27input%23content%27%29.value.trim%28%29%3B%0A%20%20%20%20%20%20%20%20const%20hasLink%20%3D%20popup.document.querySelector%28%27input%23hasLink%27%29.checked%3B%0A%20%20%20%20%20%20%20%20const%20hasFile%20%3D%20popup.document.querySelector%28%27input%23hasFile%27%29.checked%3B%0A%20%20%20%20%20%20%20%20const%20includeNsfw%20%3D%20popup.document.querySelector%28%27input%23includeNsfw%27%29.checked%3B%0A%20%20%20%20%20%20%20%20stop%20%3D%20stopBtn.disabled%20%3D%20%21%28startBtn.disabled%20%3D%20true%29%3B%0A%20%20%20%20%20%20%20%20deleteMessages%28authToken%2C%20authorId%2C%20guildId%2C%20channelIds%2C%20afterMessageId%2C%20beforeMessageId%2C%20content%2C%20hasLink%2C%20hasFile%2C%20includeNsfw%2C%20logger%2C%20%28%29%20%3D%3E%20%21%28stop%20%3D%3D%3D%20true%20%7C%7C%20popup.closed%29%29.then%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20stop%20%3D%20stopBtn.disabled%20%3D%20%21%28startBtn.disabled%20%3D%20false%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20stopBtn.onclick%20%3D%20e%20%3D%3E%20stop%20%3D%20stopBtn.disabled%20%3D%20%21%28startBtn.disabled%20%3D%20false%29%3B%0A%20%20%20%20popup.document.querySelector%28%27button%23clear%27%29.onclick%20%3D%20e%20%3D%3E%20%7B%20logArea.innerHTML%20%3D%20%27%27%3B%20%7D%3B%0A%20%20%20%20popup.document.querySelector%28%27button%23getToken%27%29.onclick%20%3D%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20window.dispatchEvent%28new%20Event%28%27beforeunload%27%29%29%3B%0A%20%20%20%20%20%20%20%20popup.document.querySelector%28%27input%23authToken%27%29.value%20%3D%20JSON.parse%28popup.localStorage.token%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20popup.document.querySelector%28%27button%23getAuthor%27%29.onclick%20%3D%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20popup.document.querySelector%28%27input%23authorId%27%29.value%20%3D%20JSON.parse%28popup.localStorage.user_id_cache%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20popup.document.querySelector%28%27button%23getGuildAndChannel%27%29.onclick%20%3D%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20m%20%3D%20location.href.match%28/channels%5C/%28%5B%5Cw%40%5D%2B%29%5C/%28%5Cd%2B%29/%29%3B%0A%20%20%20%20%20%20%20%20popup.document.querySelector%28%27input%23guildId%27%29.value%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20%20%20popup.document.querySelector%28%27input%23channelId%27%29.value%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20popup.document.querySelector%28%27%23redact%27%29.onchange%20%3D%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20popup.document.body.classList.toggle%28%27redact%27%29%20%26%26%0A%20%20%20%20%20%20%20%20popup.alert%28%27This%20will%20attempt%20to%20hide%20personal%20information%2C%20but%20make%20sure%20to%20double%20check%20before%20sharing%20screenshots.%27%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20const%20logger%20%3D%20%28type%3D%27%27%2C%20args%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20style%20%3D%20%7B%20%27%27%3A%20%27%27%2C%20info%3A%20%27color%3A%2300b0f4%3B%27%2C%20verb%3A%20%27color%3A%2372767d%3B%27%2C%20warn%3A%20%27color%3A%23faa61a%3B%27%2C%20error%3A%20%27color%3A%23f04747%3B%27%2C%20success%3A%20%27color%3A%2343b581%3B%27%20%7D%5Btype%5D%3B%0A%20%20%20%20%20%20%20%20logArea.insertAdjacentHTML%28%27beforeend%27%2C%20%60%3Cdiv%20style%3D%22%24%7Bstyle%7D%22%3E%24%7BArray.from%28args%29.map%28o%20%3D%3E%20typeof%20o%20%3D%3D%3D%20%27object%27%20%3F%20%20JSON.stringify%28o%2C%20o%20instanceof%20Error%20%26%26%20Object.getOwnPropertyNames%28o%29%29%20%3A%20o%29.join%28%27%5Ct%27%29%7D%3C/div%3E%60%29%3B%0A%20%20%20%20%20%20%20%20if%20%28autoScroll.checked%29%20logArea.querySelector%28%27div%3Alast-child%27%29.scrollIntoView%28false%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20/%2A%2A%0A%20%20%20%20%20%2A%20Delete%20all%20messages%20in%20a%20Discord%20channel%20or%20DM%0A%20%20%20%20%20%2A%20%40param%20%7Bstring%7D%20authToken%20Your%20authorization%20token%0A%20%20%20%20%20%2A%20%40param%20%7Bstring%7D%20authorId%20Author%20of%20the%20messages%20you%20want%20to%20delete%0A%20%20%20%20%20%2A%20%40param%20%7Bstring%7D%20guildId%20Server%20were%20the%20messages%20are%20located%0A%20%20%20%20%20%2A%20%40param%20%7Bstring%5B%5D%7D%20channelIds%20List%20of%20channels%20where%20the%20messages%20are%20located%0A%20%20%20%20%20%2A%20%40param%20%7Bstring%7D%20afterMessageId%20Only%20delete%20messages%20after%20this%2C%20leave%20blank%20do%20delete%20all%0A%20%20%20%20%20%2A%20%40param%20%7Bstring%7D%20beforeMessageId%20Only%20delete%20messages%20before%20this%2C%20leave%20blank%20do%20delete%20all%0A%20%20%20%20%20%2A%20%40param%20%7Bstring%7D%20content%20Filter%20messages%20that%20contains%20this%20text%20content%0A%20%20%20%20%20%2A%20%40param%20%7Bboolean%7D%20hasLink%20Filter%20messages%20that%20contains%20link%0A%20%20%20%20%20%2A%20%40param%20%7Bboolean%7D%20hasFile%20Filter%20messages%20that%20contains%20file%0A%20%20%20%20%20%2A%20%40param%20%7Bboolean%7D%20includeNsfw%20Search%20in%20NSFW%20channels%0A%20%20%20%20%20%2A%20%40param%20%7Bfunction%28string%2C%20Array%29%7D%20extLogger%20Function%20for%20logging%0A%20%20%20%20%20%2A%20%40param%20%7Bfunction%7D%20stopHndl%20stopHndl%20used%20for%20stopping%0A%20%20%20%20%20%2A%20%40author%20Victornpb%20%3Chttps%3A//www.github.com/victornpb%3E%0A%20%20%20%20%20%2A%20%40see%20https%3A//github.com/victornpb/deleteDiscordMessages%0A%20%20%20%20%20%2A/%0A%20%20%20%20async%20function%20deleteMessages%28authToken%2C%20authorId%2C%20guildId%2C%20channelIds%2C%20afterMessageId%2C%20beforeMessageId%2C%20content%2ChasLink%2C%20hasFile%2C%20includeNsfw%2C%20extLogger%2C%20stopHndl%29%20%7B%0A%20%20%20%20%20%20%20%20const%20start%20%3D%20new%20Date%28%29%3B%0A%20%20%20%20%20%20%20%20let%20deleteDelay%20%3D%20100%3B%0A%20%20%20%20%20%20%20%20let%20searchDelay%20%3D%20100%3B%0A%20%20%20%20%20%20%20%20let%20delCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20failCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20avgPing%3B%0A%20%20%20%20%20%20%20%20let%20lastPing%3B%0A%20%20%20%20%20%20%20%20let%20grandTotal%3B%0A%20%20%20%20%20%20%20%20let%20throttledCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20throttledTotalTime%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20offset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20iterations%20%3D%20-1%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28channelIds.length%20%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20channelId%20%3D%20channelIds%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20const%20wait%20%3D%20async%20ms%20%3D%3E%20new%20Promise%28done%20%3D%3E%20setTimeout%28done%2C%20ms%29%29%3B%0A%20%20%20%20%20%20%20%20const%20msToHMS%20%3D%20s%20%3D%3E%20%60%24%7Bs%20/%203.6e6%20%7C%200%7Dh%20%24%7B%28s%20%25%203.6e6%29%20/%206e4%20%7C%200%7Dm%20%24%7B%28s%20%25%206e4%29%20/%201000%20%7C%200%7Ds%60%3B%0A%20%20%20%20%20%20%20%20const%20escapeHTML%20%3D%20html%20%3D%3E%20html.replace%28/%5B%26%3C%22%27%5D/g%2C%20m%20%3D%3E%20%28%7B%20%27%26%27%3A%20%27%26amp%3B%27%2C%20%27%3C%27%3A%20%27%26lt%3B%27%2C%20%27%22%27%3A%20%27%26quot%3B%27%2C%20%27%5C%27%27%3A%20%27%26%23039%3B%27%20%7D%29%5Bm%5D%29%3B%0A%20%20%20%20%20%20%20%20const%20redact%20%3D%20str%20%3D%3E%20%60%3Cspan%20class%3D%22priv%22%3E%24%7BescapeHTML%28str%29%7D%3C/span%3E%3Cspan%20class%3D%22mask%22%3EREDACTED%3C/span%3E%60%3B%0A%20%20%20%20%20%20%20%20const%20queryString%20%3D%20params%20%3D%3E%20params.filter%28p%20%3D%3E%20p%5B1%5D%20%21%3D%3D%20undefined%29.map%28p%20%3D%3E%20p%5B0%5D%20%2B%20%27%3D%27%20%2B%20encodeURIComponent%28p%5B1%5D%29%29.join%28%27%26%27%29%3B%0A%20%20%20%20%20%20%20%20const%20ask%20%3D%20async%20msg%20%3D%3E%20new%20Promise%28resolve%20%3D%3E%20setTimeout%28%28%29%20%3D%3E%20resolve%28popup.confirm%28msg%29%29%2C%2010%29%29%3B%0A%20%20%20%20%20%20%20%20const%20printDelayStats%20%3D%20%28%29%20%3D%3E%20log.verb%28%60Delete%20delay%3A%20%24%7BdeleteDelay%7Dms%2C%20Search%20delay%3A%20%24%7BsearchDelay%7Dms%60%2C%20%60Last%20Ping%3A%20%24%7BlastPing%7Dms%2C%20Average%20Ping%3A%20%24%7BavgPing%7C0%7Dms%60%29%3B%0A%0A%20%20%20%20%20%20%20%20const%20log%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20debug%28%29%20%7B%20extLogger%20%3F%20extLogger%28%27debug%27%2C%20arguments%29%20%3A%20console.debug.apply%28console%2C%20arguments%29%3B%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20info%28%29%20%7B%20extLogger%20%3F%20extLogger%28%27info%27%2C%20arguments%29%20%3A%20console.info.apply%28console%2C%20arguments%29%3B%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20verb%28%29%20%7B%20extLogger%20%3F%20extLogger%28%27verb%27%2C%20arguments%29%20%3A%20console.log.apply%28console%2C%20arguments%29%3B%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20warn%28%29%20%7B%20extLogger%20%3F%20extLogger%28%27warn%27%2C%20arguments%29%20%3A%20console.warn.apply%28console%2C%20arguments%29%3B%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20error%28%29%20%7B%20extLogger%20%3F%20extLogger%28%27error%27%2C%20arguments%29%20%3A%20console.error.apply%28console%2C%20arguments%29%3B%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20success%28%29%20%7B%20extLogger%20%3F%20extLogger%28%27success%27%2C%20arguments%29%20%3A%20console.info.apply%28console%2C%20arguments%29%3B%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20async%20function%20recurse%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20iterations%2B%2B%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20API_SEARCH_URL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28guildId%20%3D%3D%3D%20%27%40me%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20API_SEARCH_URL%20%3D%20%60https%3A//discordapp.com/api/v6/channels/%24%7BchannelId%7D/messages/%60%3B%20//%20DMs%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20API_SEARCH_URL%20%3D%20%60https%3A//discordapp.com/api/v6/guilds/%24%7BguildId%7D/messages/%60%3B%20//%20Server%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20headers%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27Authorization%27%3A%20authToken%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20resp%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20s%20%3D%20Date.now%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resp%20%3D%20await%20fetch%28API_SEARCH_URL%20%2B%20%27search%3F%27%20%2B%20queryString%28%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27author_id%27%2C%20authorId%20%7C%7C%20undefined%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27channel_id%27%2C%20%28guildId%20%21%3D%3D%20%27%40me%27%20%3F%20channelId%20%3A%20undefined%29%20%7C%7C%20undefined%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27min_id%27%2C%20afterMessageId%20%7C%7C%20undefined%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27max_id%27%2C%20beforeMessageId%20%7C%7C%20undefined%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27sort_by%27%2C%20%27timestamp%27%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27sort_order%27%2C%20%27desc%27%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27offset%27%2C%20offset%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27has%27%2C%20hasLink%20%3F%20%27link%27%20%3A%20undefined%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27has%27%2C%20hasFile%20%3F%20%27file%27%20%3A%20undefined%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27content%27%2C%20content%20%7C%7C%20undefined%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%20%27include_nsfw%27%2C%20includeNsfw%20%3F%20true%20%3A%20undefined%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%29%2C%20%7B%20headers%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastPing%20%3D%20%28Date.now%28%29%20-%20s%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20avgPing%20%3D%20avgPing%3E0%20%3F%20%28avgPing%2A0.9%29%20%2B%20%28lastPing%2A0.1%29%3AlastPing%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20log.error%28%27Search%20request%20throwed%20an%20error%3A%27%2C%20err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20not%20indexed%20yet%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28resp.status%20%3D%3D%3D%20202%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20w%20%3D%20%28await%20resp.json%28%29%29.retry_after%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throttledCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throttledTotalTime%20%2B%3D%20w%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.warn%28%60This%20channel%20wasn%27t%20indexed%2C%20waiting%20%24%7Bw%7Dms%20for%20discord%20to%20index%20it...%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20wait%28w%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20await%20recurse%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21resp.ok%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20searching%20messages%20too%20fast%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28resp.status%20%3D%3D%3D%20429%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20w%20%3D%20%28await%20resp.json%28%29%29.retry_after%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throttledCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throttledTotalTime%20%2B%3D%20w%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20searchDelay%20%2B%3D%20w%3B%20//%20increase%20delay%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.warn%28%60Being%20rate%20limited%20by%20the%20API%20for%20%24%7Bw%7Dms%21%20Increasing%20search%20delay...%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20printDelayStats%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%60Cooling%20down%20for%20%24%7Bw%20%2A%202%7Dms%20before%20retrying...%60%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20wait%28w%2A2%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20await%20recurse%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20log.error%28%60Error%20searching%20messages%2C%20API%20responded%20with%20status%20%24%7Bresp.status%7D%21%5Cn%60%2C%20await%20resp.json%28%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20data%20%3D%20await%20resp.json%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20total%20%3D%20data.total_results%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21grandTotal%29%20grandTotal%20%3D%20total%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20myMessages%20%3D%20data.messages.map%28convo%20%3D%3E%20convo.find%28message%20%3D%3E%20message.hit%3D%3D%3Dtrue%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20systemMessages%20%3D%20myMessages.filter%28msg%20%3D%3E%20msg.type%20%21%3D%3D%200%29%3B%20//%20https%3A//discordapp.com/developers/docs/resources/channel%23message-object-message-types%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20deletableMessages%20%3D%20myMessages.filter%28msg%20%3D%3E%20msg.type%20%3D%3D%3D%200%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20end%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.success%28%60Ended%20at%20%24%7Bnew%20Date%28%29.toLocaleString%28%29%7D%21%20Total%20time%3A%20%24%7BmsToHMS%28Date.now%28%29%20-%20start.getTime%28%29%29%7D%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20printDelayStats%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%60Rate%20Limited%3A%20%24%7BthrottledCount%7D%20times.%20Total%20time%20throttled%3A%20%24%7BmsToHMS%28throttledTotalTime%29%7D.%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.debug%28%60Deleted%20%24%7BdelCount%7D%20messages%2C%20%24%7BfailCount%7D%20failed.%5Cn%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20etr%20%3D%20msToHMS%28%28searchDelay%20%2A%20Math.round%28total%20/%2025%29%29%20%2B%20%28%28deleteDelay%20%2B%20avgPing%29%20%2A%20total%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.info%28%60Total%20messages%20found%3A%20%24%7Bdata.total_results%7D%60%2C%20%60%28Messages%20in%20current%20page%3A%20%24%7Bdata.messages.length%7D%2C%20Author%3A%20%24%7BdeletableMessages.length%7D%2C%20System%3A%20%24%7BsystemMessages.length%7D%29%60%2C%20%60offset%3A%20%24%7Boffset%7D%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20printDelayStats%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%60Estimated%20time%20remaining%3A%20%24%7Betr%7D%60%29%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28myMessages.length%20%3E%200%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28iterations%20%3C%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%60Waiting%20for%20your%20confirmation...%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21await%20ask%28%60Do%20you%20want%20to%20delete%20~%24%7Btotal%7D%20messages%3F%5CnEstimated%20time%3A%20%24%7Betr%7D%5Cn%5Cn----%20Preview%20----%5Cn%60%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20myMessages.map%28m%20%3D%3E%20%60%24%7Bm.author.username%7D%23%24%7Bm.author.discriminator%7D%3A%20%24%7Bm.attachments.length%20%3F%20%27%5BATTACHMENTS%5D%27%20%3A%20m.content%7D%60%29.join%28%27%5Cn%27%29%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20end%28log.error%28%27Aborted%20by%20you%21%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%60OK%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20deletableMessages.length%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20message%20%3D%20deletableMessages%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28stopHndl%20%26%26%20stopHndl%28%29%3D%3D%3Dfalse%29%20return%20end%28log.error%28%27Stopped%20by%20you%21%27%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.debug%28%60%24%7B%28%28delCount%20%2B%201%29%20/%20grandTotal%20%2A%20100%29.toFixed%282%29%7D%25%20%28%24%7BdelCount%20%2B%201%7D/%24%7BgrandTotal%7D%29%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60Deleting%20ID%3A%24%7Bredact%28message.id%29%7D%20%3Cb%3E%24%7Bredact%28message.author.username%2B%27%23%27%2Bmessage.author.discriminator%29%7D%20%3Csmall%3E%28%24%7Bredact%28new%20Date%28message.timestamp%29.toLocaleString%28%29%29%7D%29%3C/small%3E%3A%3C/b%3E%20%3Ci%3E%24%7Bredact%28message.content%29.replace%28/%5Cn/g%2C%27%E2%86%B5%27%29%7D%3C/i%3E%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20message.attachments.length%20%3F%20redact%28JSON.stringify%28message.attachments%29%29%20%3A%20%27%27%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20resp%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20s%20%3D%20Date.now%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20API_DELETE_URL%20%3D%20%60https%3A//discordapp.com/api/v6/channels/%24%7BchannelId%7D/messages/%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resp%20%3D%20await%20fetch%28API_DELETE_URL%20%2B%20message.id%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20headers%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20%27DELETE%27%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastPing%20%3D%20%28Date.now%28%29%20-%20s%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20avgPing%20%3D%20%28avgPing%2A0.9%29%20%2B%20%28lastPing%2A0.1%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.error%28%27Delete%20request%20throwed%20an%20error%3A%27%2C%20err%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%27Related%20object%3A%27%2C%20redact%28JSON.stringify%28message%29%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21resp.ok%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20deleting%20messages%20too%20fast%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28resp.status%20%3D%3D%3D%20429%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20w%20%3D%20%28await%20resp.json%28%29%29.retry_after%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throttledCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throttledTotalTime%20%2B%3D%20w%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deleteDelay%20%2B%3D%20w%3B%20//%20increase%20delay%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.warn%28%60Being%20rate%20limited%20by%20the%20API%20for%20%24%7Bw%7Dms%21%20Adjusted%20delete%20delay%20to%20%24%7BdeleteDelay%7Dms.%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20printDelayStats%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%60Cooling%20down%20for%20%24%7Bw%2A2%7Dms%20before%20retrying...%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20wait%28w%2A2%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20i--%3B%20//%20retry%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.error%28%60Error%20deleting%20message%2C%20API%20responded%20with%20status%20%24%7Bresp.status%7D%21%60%2C%20await%20resp.json%28%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%27Related%20object%3A%27%2C%20redact%28JSON.stringify%28message%29%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20wait%28deleteDelay%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28systemMessages.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20grandTotal%20-%3D%20systemMessages.length%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20offset%20%2B%3D%20systemMessages.length%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%60Found%20%24%7BsystemMessages.length%7D%20system%20messages%21%20Decreasing%20grandTotal%20to%20%24%7BgrandTotal%7D%20and%20increasing%20offset%20to%20%24%7Boffset%7D.%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.verb%28%60Searching%20next%20messages%20in%20%24%7BsearchDelay%7Dms...%60%2C%20%28offset%20%3F%20%60%28offset%3A%20%24%7Boffset%7D%29%60%20%3A%20%27%27%29%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20wait%28searchDelay%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28stopHndl%20%26%26%20stopHndl%28%29%3D%3D%3Dfalse%29%20return%20end%28log.error%28%27Stopped%20by%20you%21%27%29%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20await%20recurse%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28total%20-%20offset%20%3E%200%29%20log.warn%28%27Ended%20because%20API%20returned%20an%20empty%20page.%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20channelIds.shift%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20wait%28searchDelay%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20deleteMessages%28authToken%2C%20authorId%2C%20guildId%2C%20channelIds%2C%20afterMessageId%2C%20beforeMessageId%2C%20content%2ChasLink%2C%20hasFile%2C%20includeNsfw%2C%20extLogger%2C%20stopHndl%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.success%28%60%5CnStarted%20at%20%24%7Bstart.toLocaleString%28%29%7D%60%29%3B%0A%20%20%20%20%20%20%20%20log.debug%28%60authorId%3D%22%24%7Bredact%28authorId%29%7D%22%20guildId%3D%22%24%7Bredact%28guildId%29%7D%22%20channelId%3D%22%24%7Bredact%28channelId%29%7D%22%20afterMessageId%3D%22%24%7Bredact%28afterMessageId%29%7D%22%20beforeMessageId%3D%22%24%7Bredact%28beforeMessageId%29%7D%22%20hasLink%3D%24%7B%21%21hasLink%7D%20hasFile%3D%24%7B%21%21hasFile%7D%60%29%3B%0A%20%20%20%20%20%20%20%20return%20await%20recurse%28%29%3B%0A%20%20%20%20%7D%0A%7D%29%28%29%3B%0A%0A">Delete Discord Messages</a>
<br><br>
<b>Hash:</b> 905473e36e7f40164f6834eaf47dfbef3e93704a5edf90c9b5cc5c81e0bd7158<br>
<b>Generated from commit:</b> 3aef63f6eca2c8bdf0fe2b1f94942b706ae7ca7c
<br>
To check the authenticity of the bookmarklet you can generate this HTML file yourself by using the `make-bookmark` script.
</body>
</html>